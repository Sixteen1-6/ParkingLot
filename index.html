<!DOCTYPE html>
<html>
  <head>
    <title>Parking Detection Results</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }
      
      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 16px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        overflow: hidden;
      }
      
      .header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        text-align: center;
      }
      
      h1 {
        font-size: 32px;
        font-weight: 600;
        margin-bottom: 10px;
      }
      
      .content {
        padding: 30px;
      }
      
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }
      
      .stat-card {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        padding: 25px;
        border-radius: 12px;
        text-align: center;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        border: 2px solid transparent;
      }
      
      .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
      }
      
      .stat-card.open {
        background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
        border-color: #5cd88d;
      }
      
      .stat-card.occupied {
        background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        border-color: #f76a8c;
      }
      
      .stat-card.total {
        background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        border-color: #7ec4cf;
      }
      
      .stat-number {
        font-size: 48px;
        font-weight: bold;
        margin-bottom: 5px;
        color: #2d3748;
      }
      
      .stat-label {
        font-size: 14px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
        color: #4a5568;
      }
      
      .occupancy-bar {
        margin-bottom: 30px;
        background: #e2e8f0;
        border-radius: 10px;
        overflow: hidden;
        height: 40px;
        position: relative;
      }
      
      .occupancy-fill {
        height: 100%;
        background: linear-gradient(90deg, #fa709a 0%, #fee140 100%);
        transition: width 1s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 14px;
      }
      
      .image-container {
        position: relative;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }
      
      img {
        width: 100%;
        height: auto;
        display: block;
      }
      
      .image-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(to bottom, transparent 0%, rgba(0,0,0,0.3) 100%);
        pointer-events: none;
      }
      
      .legend {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin-top: 20px;
        padding: 20px;
        background: #f7fafc;
        border-radius: 10px;
      }
      
      .legend-item {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 14px;
        font-weight: 600;
      }
      
      .legend-color {
        width: 24px;
        height: 24px;
        border-radius: 4px;
        border: 2px solid rgba(0, 0, 0, 0.1);
      }
      
      .legend-color.open {
        background: #48bb78;
      }
      
      .legend-color.occupied {
        background: #f56565;
      }
      
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      .stat-card, .occupancy-bar, .image-container {
        animation: fadeIn 0.6s ease forwards;
      }
      
      .stat-card:nth-child(1) { animation-delay: 0.1s; opacity: 0; }
      .stat-card:nth-child(2) { animation-delay: 0.2s; opacity: 0; }
      .stat-card:nth-child(3) { animation-delay: 0.3s; opacity: 0; }
      .occupancy-bar { animation-delay: 0.4s; opacity: 0; }
      .image-container { animation-delay: 0.5s; opacity: 0; }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1> Parking Detection Results</h1>
      </div>
      
      <div class="content">
        <div class="stats-grid">
          <div class="stat-card open">
            <div class="stat-number" id="openCount">${stats.openCount || 0}</div>
            <div class="stat-label">Open Spots</div>
          </div>
          
          <div class="stat-card occupied">
            <div class="stat-number" id="occupiedCount">${stats.occupied || 0}</div>
            <div class="stat-label">Occupied Spots</div>
          </div>
          
          <div class="stat-card total">
            <div class="stat-number" id="totalCount">${(stats.openCount || 0) + (stats.occupied || 0)}</div>
            <div class="stat-label">Total Spots</div>
          </div>
        </div>
        
        <div class="occupancy-bar">
          <div class="occupancy-fill" id="occupancyFill"></div>
        </div>
        
        <div class="image-container">
          <img
            src="data:image/jpeg;base64,${imageData || ''}"
            alt="Annotated parking lot"
          />
          <div class="image-overlay"></div>
        </div>
        
        <div class="legend">
          <div class="legend-item">
            <div class="legend-color open"></div>
            <span>Available</span>
          </div>
          <div class="legend-item">
            <div class="legend-color occupied"></div>
            <span>Occupied</span>
          </div>
        </div>
      </div>
    </div>
    
    <script>
      
      // Calculate and display occupancy percentage
      const openCount = ${stats.openCount || 0};
      const occupiedCount = ${stats.occupied || 0};
      const total = openCount + occupiedCount;
      
      if (total > 0) {
        const occupancyPercent = ((occupiedCount / total) * 100).toFixed(1);
        const fillElement = document.getElementById('occupancyFill');
        fillElement.style.width = occupancyPercent + '%';
        fillElement.textContent = occupancyPercent + '% Occupied';
      }
    </script>
  </body>
</html>

